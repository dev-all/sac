@model List<SAC.Models.CuentaCteProveedorModelView>

@{
    /**/

    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!-- Date picker plugins css -->
<link href="/Content/assets/plugins/bootstrap-datepicker/bootstrap-datepicker.min.css" rel="stylesheet" type="text/css" />

<!-- ============================================================== -->
<!-- Bread crumb and right sidebar toggle -->
<!-- ============================================================== -->
<div class="row page-titles m-t-40">
    <div class="col-md-5 align-self-center">
        <h3 class="text-themecolor">Lista de Proveedores</h3>
    </div>

</div>
<div class="row">
    <div class="col-xlg-12 col-lg-12 col-md-12">
        <div class="card">
            <div class="card-body">

                <h4 class="card-title">Exportar datos</h4>
                <h6 class="card-subtitle">Formato de salida: PDF</h6>

                <div class="row m-t-20 m-b-40">
                    <div class="col-md-12">
                        @*@Html.ActionLink("Nuevo", "Agregar", "Proveedor", new { @class = "btn btn-secondary btn-sm" })*@
                    </div>
                </div>
                @using (Ajax.BeginForm("Filtrado", "", new AjaxOptions
                {
                    HttpMethod = "POST",
                    UpdateTargetId = "divPagina",
                    OnComplete = "fntabla",
                    InsertionMode = InsertionMode.Replace
                }, new { @id = "frmFiltrado" }))
                {
                    <div class="row">
                        <div class="card card-body">
                            <h4 class="card-title">Busqueda</h4>
                            <h6 class="card-subtitle"> Puede buscar ingresando la fecha inicio y fin </h6>
                            <br />
                            <div class="form-group row col-8">
                                @Html.TextBox("inicio", null, new { @class = "col-sm-2 offset-sm-1 form-control", @placeholder = "Fecha inicio" })
                                @Html.TextBox("fin", null, new { @class = "col-sm-2 offset-sm-1 form-control", @placeholder = "Fecha fin" })
                                <button type="submit" id="btnBuscar" class="btn btn-sm btn-secondary  mb-2 offset-sm-1">Buscar</button>
                            </div>
                        </div>
                    </div>

                    <div id="divPagina">
                        @Html.Partial("_Tabla", Model)
                    </div>
                }
                
            </div>
        </div>
    </div>
</div>


<script>


    function IraPagar(valor) {
        location.href = "@Url.Action("PagarFactura", "CuentaCteProveedor", new {idProveedor= "cid" })".replace("cid",valor.toString());
    }


    function fntabla() {
        $('#TblProveedor').DataTable({
            "language": { "url": "../Content/assets/plugins/datatables/es.txt" },
            "order": [[2, 'asc']],
            'paging': true,
            'lengthChange': false,
            'searching': true,
            'ordering': true,
            'info': true,
            'autoWidth': true,
            'dom': 'Bfrtip',
            'buttons': [
                'pdf'
            ]
        });
    }



</script>


@section Scripts{

    <!-- This is data table -->
    <script src="/Content/assets/plugins/datatables/jquery.dataTables.min.js"></script>
    <!-- start - This is for export functionality only -->
    <script src="~/Content/assets/plugins/datatables/jsTable/dataTables.buttons.min.js"></script>
    <script src="~/Content/assets/plugins/datatables/jsTable/buttons.flash.min.js"></script>
    <script src="~/Content/assets/plugins/datatables/jsTable/jszip.min.js"></script>
    <script src="~/Content/assets/plugins/datatables/jsTable/pdfmake.min.js"></script>
    <script src="~/Content/assets/plugins/datatables/jsTable/vfs_fonts.js"></script>
    <script src="~/Content/assets/plugins/datatables/jsTable/buttons.html5.min.js"></script>
    <script src="~/Content/assets/plugins/datatables/jsTable/buttons.print.min.js"></script>

    <!-- Date Picker Plugin JavaScript -->
    <script src="/Content/assets/plugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>
    @Scripts.Render("~/bundles/jqueryval")



    <script type="text/javascript">
        $(document).ready(function () {
            $('#TblProveedor').DataTable({
                dom: 'Bfrtip',
                buttons: [
                    'pdf'
                ]
            });
        });


        //todo esto es para validar el ingreso de fechas
        //la segunda fecha se carga y valida en relacion a la primer fecha

        var getDate = function (input) {
            return new Date(input.date.valueOf());
        }

        $('#inicio, #fin').datepicker({
            format: "dd/mm/yyyy",
            language: 'es',
            autoclose: true,
            todayHighlight: true
        });

        $('#fin').datepicker({
            startDate: '+6d',
            endDate: '+36d',
        });

        $('#inicio').datepicker({
            startDate: '+5d',
            endDate: '+35d',
        }).on('changeDate',
            function (selected) {
                $('#fin').datepicker('clearDates');
                $('#fin').datepicker('setStartDate', getDate(selected));
            });


    </script>
}