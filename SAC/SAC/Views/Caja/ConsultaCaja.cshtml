@model SAC.Models.CajaModelView

@{
    ViewBag.Title = "Consulta de Movimientos por Grupos";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .dataTables_wrapper .dataTables_paginate .paginate_button {
        padding: 0.1em 1em;
    }

    .table td, .table th {
        padding: .25rem;
    }
</style>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    List<SelectListItem> ListaCodigoCaja = (List<SelectListItem>)ViewBag.Listapagina;

<div class="form-horizontal">

    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="row">
        <div class="col-lg-12">
            <div class="card">

                <div class="card-body">
                    <h4 class="card-title">Busqueda por Grupo</h4>
                    <div class="form-body">
                        <div class="row">

                            <div class="col-md-4">
                                <div class="form-group row">
                                    <label for="readonly5" class="control-label form-control-sm">Grupo Caja</label>
                                    <div class="col-md-8">
                                        @Html.DropDownList("CIdGrupoCaja", ListaCodigoCaja, null, new { @class = "form-control form-control-sm" })
                                        @Html.ValidationMessage("CIdGrupoCaja", new { @class = "text-danger form-control-sm" })
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group row ">
                                    @Html.LabelFor(m => m.cFechaDesde, new { @class = " control-label form-control-sm col-md-6 text-right" })
                                    <div class="col-md-6">
                                        @Html.EditorFor(model => model.cFechaDesde, new { htmlAttributes = new { @class = "form-control form-control-sm" } })
                                        @Html.ValidationMessageFor(model => model.FechaCierre, "", new { @class = "text-danger" })

                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group row  ">
                                    @Html.LabelFor(m => m.cFechaHasta, new { @class = " control-label form-control-sm col-md-6 text-right" })
                                    <div class="col-md-6">
                                        @Html.EditorFor(model => model.cFechaHasta, new { htmlAttributes = new { @class = "form-control form-control-sm" } })
                                        @Html.ValidationMessageFor(model => model.FechaCierre, "", new { @class = "text-danger" })

                                    </div>
                                </div>
                            </div>

                            <div class="col-12">
                                <button type="submit" class="btn btn-success btn-sm"> <i class="fa fa-check"></i> Consultar</button>
                                @Html.ActionLink("Cancelar", "ConsultaCaja", "Caja", htmlAttributes: new { @class = "btn btn-dark btn-sm" })

                            </div>

                        </div>




                    </div>
                </div>
            </div>
        </div>
    </div>
    @if (Model.CVisible)
    {
        
    


    <div class="row">
        <div class="col-lg-12">
            <div class="card">

                <div class="card-body">
                    <h4 class="card-title">Grilla de la Consulta</h4>
                    <div class="form-body">

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group ">
                                    <label> Saldo al </label>


                                    @Html.EditorFor(model => model.cFechaDesde, new { htmlAttributes = new { @class = "form-control form-control-sm", @readonly = "readonly" } })


                                </div>
                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Pesos</label>
                                    @Html.EditorFor(model => model.CajaSaldoInicial.ImporteFinalPesos, new { htmlAttributes = new { @class = "form-control form-control-sm", @readonly = "readonly" } })
                                </div>
                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Dolares</label>
                                    @Html.EditorFor(model => model.CajaSaldoInicial.ImporteFinalDolares, new { htmlAttributes = new { @class = "form-control form-control-sm", @readonly = "readonly" } })
                                </div>

                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label>Cheques</label>
                                    @Html.EditorFor(model => model.CajaSaldoInicial.ImporteFinalDepositos, new { htmlAttributes = new { @class = "form-control form-control-sm", @readonly = "readonly" } })
                                </div>
                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Tarjetas</label>
                                    @Html.EditorFor(model => model.CajaSaldoInicial.ImporteFinalTarjetas, new { htmlAttributes = new { @class = "form-control form-control-sm", @readonly = "readonly" } })
                                </div>
                            </div>

                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-responsive-md">

                                    <table id="example23" class="table stylish-table">
                                        <thead>
                                            <tr>
                                                <th style="max-width: 33%;">Concepto</th>
                                                <th class="text-center">Pesos</th>
                                                <th class="text-center">Dolares</th>
                                                <th class="text-center">Cheques</th>
                                                <th class="text-center">Tarjeta</th>
                                                <th>Nro Cierre</th>
                                                <th>Fecha</th>
                                                <th>Usuario</th>

                                            </tr>
                                        </thead>
                                        <tbody>

                                            @{
                                                decimal TotalPesos = 0;
                                                decimal TotalDolares = 0;
                                                decimal TotalCheque = 0;
                                                decimal TotalTarjeta = 0;
                                                decimal TotalDeposito = 0;
                                            }


                                            @foreach (var item in Model.ListaCaja)
                                            {

                                                TotalPesos += item.ImportePesos;
                                                TotalDolares += item.ImporteDolar;
                                                TotalCheque += item.ImporteCheque;
                                                TotalTarjeta += item.ImporteTarjeta;
                                                TotalDeposito += item.ImporteDeposito;

                                                <tr>
                                                    <td style="max-width: 33%;">
                                                        @Html.DisplayFor(modelItem => item.Concepto)
                                                    </td>
                                                    <td class="text-right">
                                                        @Html.DisplayFor(modelItem => item.ImportePesos)
                                                    </td>

                                                    <td class="text-right">
                                                        @Html.DisplayFor(modelItem => item.ImporteDolar)
                                                    </td>

                                                    <td class="text-right">
                                                        @Html.DisplayFor(modelItem => item.ImporteCheque)
                                                    </td>

                                                    <td class="text-right">
                                                        @Html.DisplayFor(modelItem => item.ImporteTarjeta)
                                                    </td>

                                                    <td class="text-right">
                                                        @Html.DisplayFor(modelItem => item.IdCajaSaldo)
                                                    </td>

                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Fecha)
                                                        @*@Convert.ToDateTime(item.Fecha).ToString("dd/MM/yyyy")*@
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.IdUsuario)
                                                        @*@Convert.ToDateTime(item.Fecha).ToString("dd/MM/yyyy")*@
                                                    </td>



                                                </tr>

                                            }

                                        </tbody>

                                    </table>

                                </div>
                            </div>
                        </div>

                        <div class="row m-t-15">

                            <div class="col-md-4">
                                <div class="form-group ">
                                    <label> Saldo de La Consulta </label>




                                </div>
                            </div>


                            <div class="col-2">
                                <div class="form-group">
                                    <label class=""> Pesos</label>
                                    <input type="text" value="@Html.Raw(TotalPesos)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Dolares</label>
                                    <input type="text" value="@Html.Raw(TotalDolares)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label>Cheques</label>
                                    <input type="text" value="@Html.Raw(TotalDeposito)" class="form-control form-control-sm" readonly="readonly" />
                                </div>
                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Tarjetas</label>
                                    <input type="text" value="@Html.Raw(TotalTarjeta)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                        </div>

                        <div class="row m-t-30">

                            <div class="col-md-4">
                                <div class="form-group ">
                                    <label> Saldo al </label>
                                    @Html.EditorFor(model => model.cFechaHasta, new { htmlAttributes = new { @class = "form-control form-control-sm", @readonly = "readonly" } })

                                </div>
                            </div>


                            <div class="col-2">
                                <div class="form-group">
                                    <label class=""> Pesos</label>
                                    <input type="text" value="@Html.Raw(TotalPesos)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Dolares</label>
                                    <input type="text" value="@Html.Raw(TotalDolares)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label>Cheques</label>
                                    <input type="text" value="@Html.Raw(TotalDeposito)" class="form-control form-control-sm" readonly="readonly" />
                                </div>
                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Tarjetas</label>
                                    <input type="text" value="@Html.Raw(TotalTarjeta)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                        </div>


                        <div class="row m-t-20">

                            <div class="col-md-4">
                                <div class="form-group ">
                                    <label>Ultimo Movimiento </label>


                                    @Html.EditorFor(model => model.cFechaHasta, new { htmlAttributes = new { @class = "form-control form-control-sm", @readonly = "readonly" } })


                                </div>
                            </div>


                            <div class="col-2">
                                <div class="form-group">
                                    <label class=""> Pesos</label>
                                    <input type="text" value="@Html.Raw(TotalPesos)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Dolares</label>
                                    <input type="text" value="@Html.Raw(TotalDolares)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label>Cheques</label>
                                    <input type="text" value="@Html.Raw(TotalDeposito)" class="form-control form-control-sm" readonly="readonly" />
                                </div>
                            </div>

                            <div class="col-2">
                                <div class="form-group">
                                    <label> Tarjetas</label>
                                    <input type="text" value="@Html.Raw(TotalTarjeta)" class="form-control form-control-sm" readonly="readonly" />
                                </div>

                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


                                                }

</div>

                                                }

@section Scripts{


    <!-- Date Picker Plugin JavaScript -->
    <script src="/Content/assets/plugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>
    @Scripts.Render("~/bundles/jqueryval")
<script src="~/Scripts/js/mask.js"></script>
    <script src="~/Scripts/view/CajaScript.js"></script>

    <script src="~/Content/assets/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.print.min.js"></script>

    <script src="~/Content/assets/plugins/switchery/dist/switchery.min.js"></script>

}

<script type="text/javascript">


    $(function () {





        // Switchery
        //var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));
        //$('.js-switch').each(function () {
        //    new Switchery($(this)[0], $(this).data());
        //});

        //var changeCheckbox = document.querySelector('.js-check-activo')
        //    , changeField = document.querySelector('.js-check-activo-field');
        //changeCheckbox.onchange = function () {
        //    $("input[type='hidden'][name='tipo']").val(changeCheckbox.checked);
        //};




    });
</script>

